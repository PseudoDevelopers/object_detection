<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image-based Search Engine</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/photoswipe.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/default-skin.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.min.css') }}" />

    <script src="{{ url_for('static', filename='scripts/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/photoswipe.min.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/photoswipe-ui-default.min.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/jqPhotoSwipe.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/fabric.min.js') }}"></script>
</head>

<body>
    <header>
        <h1>
            <a href="/">Image-based Search Engine</a>
        </h1>
    </header>

    <section id="inner-body">
        {% if template != 'document-bounding-boxes-selector' %}
            <form id="img-upload-form" method="POST" enctype="multipart/form-data" name="form">
                {% include('file-upload.html') %}

                <div class="form-btns">
                    <input id="submit-btn" class="submit-btn" type="submit" value="Only Submit" onclick="return changeFormAction(this)">
                    <input id="search-btn" class="search-btn" type="submit" value="Search" onclick="return changeFormAction(this)">
                    <input type="hidden" name="file-name">
                </div>
            </form>

            <script>
                const IMG_UPLOAD_FORM = document.getElementById('img-upload-form')
                const SUBMIT_BTN = document.getElementById('submit-btn')
                const SEARCH_BTN = document.getElementById('search-btn')

                function changeFormAction(btn) {
                    if (btn === SUBMIT_BTN) {
                        IMG_UPLOAD_FORM.action = IMG_RADIO_BTN.checked ? '/submit-image' : '/submit-document'
                    }
                    else {
                        IMG_UPLOAD_FORM.action = IMG_RADIO_BTN.checked ? '/search-image' : '/search-document'
                    }

                    $('input[name="file-name"]').val(
                        $('input[type="file"]').val().replace(/C:\\fakepath\\/i, '').substring(2)
                    )

                    // return false
                }
            </script>
        {% endif %}

        <!-- Including sub template -->
        {% include 'sub-templates/' + template + '.html' %}
    </section>
</body>

</html>
